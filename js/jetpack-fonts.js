!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("../helpers/backbone"),e=a("../models/available-font");b.exports=d.Collection.extend({model:e})},{"../helpers/backbone":6,"../models/available-font":13}],2:[function(a,b,c){var d=a("../helpers/backbone"),e=a("../models/selected-font");b.exports=d.Collection.extend({model:e,toJSON:function(){return this.reduce(function(a,b){return b.get("id")&&"jetpack-default-theme-font"!==b.get("id")&&a.push(b.toJSON()),a},[])}})},{"../helpers/backbone":6,"../models/selected-font":15}],3:[function(a,b,c){b.exports=window.wp.customize},{}],4:[function(a,b,c){var d=a("../helpers/bootstrap"),e=[];d&&d.fonts&&(e=d.fonts),b.exports=e},{"../helpers/bootstrap":7}],5:[function(a,b,c){var d=a("../helpers/bootstrap"),e=a("../helpers/underscore"),f=[];if(d&&d.types){f=d.types;var g;e.find(f,function(a,b){return"headings"===a.id?(g=b,!0):void 0}),f.splice(0,0,f.splice(g,1)[0])}b.exports=f},{"../helpers/bootstrap":7,"../helpers/underscore":10}],6:[function(a,b,c){b.exports=Backbone},{}],7:[function(a,b,c){var d=window._JetpackFonts;b.exports=d},{}],8:[function(a,b,c){var d=a("../helpers/backbone"),e=a("../helpers/underscore");b.exports=e.extend(d.Events)},{"../helpers/backbone":6,"../helpers/underscore":10}],9:[function(a,b,c){function d(){g("importing provider views from",f.JetpackFonts.providerViews),f.JetpackFonts.providerViews&&Object.keys(f.JetpackFonts.providerViews).forEach(function(a){i[a]=f.JetpackFonts.providerViews[a]})}function e(a){return d(),i[a]?(g("found view for provider",a,":",i[a]),i[a]):(g("no view found for provider",a),null)}var f=a("../helpers/api"),g=a("debug")("jetpack-fonts"),h=a("../views/dropdown-item");f.JetpackFonts||(f.JetpackFonts={}),f.JetpackFonts.providerViews||(f.JetpackFonts.providerViews={}),f.JetpackFonts.ProviderView=h;var i={};b.exports={getViewForProvider:e}},{"../helpers/api":3,"../views/dropdown-item":22,debug:34}],10:[function(a,b,c){b.exports=_},{}],11:[function(a,b,c){function d(){return window.innerHeight}b.exports={getWidowHeight:d}},{}],12:[function(a,b,c){var d=a("./helpers/api"),e=a("./views/master"),f=a("./collections/selected-fonts");d.controlConstructor.jetpackFonts=d.Control.extend({ready:function(){this.collection=new f(this.setting()),this.collection.on("change",_.bind(function(){this.setting(this.collection.toJSON())},this)),this.view=new e({collection:this.collection,el:this.container}).render()}})},{"./collections/selected-fonts":2,"./helpers/api":3,"./views/master":33}],13:[function(a,b,c){var d=a("../helpers/backbone"),e=a("../helpers/underscore"),f=[{id:-10,name:"Tiny"},{id:-5,name:"Small"},{id:0,name:"Normal"},{id:5,name:"Large"},{id:10,name:"Huge"}];b.exports=d.Model.extend({getFontVariantOptions:function(){return this.get("fvds")?this.get("fvds"):void 0},getFontVariantNameFromId:function(a){return this.get("fvds")?this.get("fvds")[a]:void 0},getFontSizeOptions:function(){return f},getFontSizeNameFromId:function(a){var b=e.findWhere(f,{id:a});return b?b.name:!1}})},{"../helpers/backbone":6,"../helpers/underscore":10}],14:[function(a,b,c){var d=a("../models/selected-font");b.exports=d.extend({initialize:function(){this.set({id:"jetpack-default-theme-font",name:"Default Theme font",provider:""})}})},{"../models/selected-font":15}],15:[function(a,b,c){var d=a("../helpers/backbone");b.exports=d.Model.extend({})},{"../helpers/backbone":6}],16:[function(a,b,c){function d(a,b){~f.indexOf(a.id)||(f.push(a.id),WebFont.load({google:{families:[a.id],text:b}}))}var e=a("../helpers/api"),f=[],g=e.JetpackFonts.ProviderView.extend({render:function(){return this.$el.html(this.model.get("name")),this.$el.css("font-family",'"'+this.model.get("name")+'"'),this.currentFont&&this.currentFont.get("name")===this.model.get("name")?this.$el.addClass("active"):this.$el.removeClass("active"),d(this.model.toJSON(),this.model.get("id")),this}});g.addFontToPage=d,e.JetpackFonts.providerViews.google=g,b.exports=g},{"../helpers/api":3}],17:[function(a,b,c){var d=a("../views/dropdown-current-template");b.exports=d.extend({className:"jetpack-fonts__current-font-size font-property-control-current",initialize:function(a){d.prototype.initialize.call(this,a),this.currentFontSize=a.currentFontSize},render:function(){return this.$el.html(this.currentFontSize),this}})},{"../views/dropdown-current-template":21}],18:[function(a,b,c){var d=a("../views/dropdown-current-template");b.exports=d.extend({className:"jetpack-fonts__current-font-variant font-property-control-current",initialize:function(a){d.prototype.initialize.call(this,a),this.currentFontVariant=a.currentFontVariant},render:function(){return this.$el.html(this.currentFontVariant),this}})},{"../views/dropdown-current-template":21}],19:[function(a,b,c){var d=a("debug")("jetpack-fonts"),e=a("../helpers/provider-views").getViewForProvider,f=a("../views/dropdown-current-template");b.exports=f.extend({className:"jetpack-fonts__current_font",initialize:function(a){f.prototype.initialize.call(this,a),this.currentFont=a.currentFont,this.active=a.active,this.listenTo(this.currentFont,"change",this.render)},render:function(){this.active?this.$el.addClass("active"):this.$el.removeClass("active"),this.providerView&&this.providerView.remove(),this.$el.text("");var a=e(this.currentFont.get("provider"));return a?(d("rendering providerView for",this.currentFont.toJSON()),this.providerView=new a({model:this.currentFont,type:this.type}),this.$el.append(this.providerView.render().el),this):(d("rendering currentFont with no providerView for",this.currentFont.toJSON()),this.$el.html(this.currentFont.get("name")),this)}})},{"../helpers/provider-views":9,"../views/dropdown-current-template":21,debug:34}],20:[function(a,b,c){var d=a("../helpers/backbone"),e=a("../helpers/emitter"),f=a("../models/default-font");b.exports=d.View.extend({className:"jetpack-fonts__default_button",tagName:"span",events:{click:"resetToDefault"},initialize:function(a){this.currentFont=a.currentFont,this.type=a.type,this.listenTo(this.currentFont,"change",this.render)},render:function(){return this.$el.html("x"),this.currentFont.id&&"jetpack-default-theme-font"!==this.currentFont.id?(this.$el.addClass("active-button"),this.$el.show()):(this.$el.removeClass("active-button"),this.$el.hide()),this},resetToDefault:function(){e.trigger("change-font",{font:new f,type:this.type})}})},{"../helpers/backbone":6,"../helpers/emitter":8,"../models/default-font":14}],21:[function(a,b,c){var d=a("../helpers/backbone"),e=a("../helpers/emitter");b.exports=d.View.extend({events:{click:"toggleDropdown"},initialize:function(a){this.type=a.type,this.menu=a.menu,this.active=!0},toggleDropdown:function(a){a&&a.stopPropagation(),this.active&&e.trigger("toggle-dropdown",{type:this.type,menu:this.menu})}})},{"../helpers/backbone":6,"../helpers/emitter":8}],22:[function(a,b,c){var d=a("../helpers/backbone"),e=a("../helpers/emitter"),f=d.View.extend({className:"jetpack-fonts__option",events:{click:"fontChanged"},initialize:function(a){this.type=a.type,this.currentFont=a.currentFont,this.currentFont&&this.listenTo(this.currentFont,"change",this.render)},render:function(){return this.$el.html(this.model.get("name")),this},fontChanged:function(){e.trigger("change-font",{font:this.model,type:this.type})}});f.addFontToPage=function(){},b.exports=f},{"../helpers/backbone":6,"../helpers/emitter":8}],23:[function(a,b,c){var d=a("../helpers/backbone"),e=a("../helpers/emitter");b.exports=d.View.extend({initialize:function(a){this.type=a.type,this.menu=a.menu,this.listenTo(e,"close-open-menus",this.close),this.listenTo(e,"toggle-dropdown",this.toggle)},toggle:function(a){a.type===this.type&&a.menu===this.menu&&(this.isOpen?this.close():this.open())},open:function(){e.trigger("close-open-menus"),this.$el.addClass("open"),this.isOpen=!0},close:function(){this.$el.removeClass("open"),this.isOpen=!1}})},{"../helpers/backbone":6,"../helpers/emitter":8}],24:[function(a,b,c){var d=a("../helpers/backbone"),e=a("../views/font-dropdown"),f=a("../views/current-font"),g=a("../views/default-font-button"),h=a("../views/font-variant-control"),i=a("../views/font-size-control");b.exports=d.View.extend({className:"jetpack-fonts__menu_container",initialize:function(a){this.fontData=a.fontData,this.type=a.type,this.menu="fontFamily"},render:function(){return this.$el.append(new f({type:this.type,menu:this.menu,currentFont:this.model,active:this.fontData.length>0}).render().el),this.$el.append(new e({type:this.type,menu:this.menu,currentFont:this.model,fontData:this.fontData}).render().el),this.$el.append(new g({type:this.type,currentFont:this.model}).render().el),this.$el.append(new i({type:this.type,currentFont:this.model,fontData:this.fontData}).render().el),this.$el.append(new h({type:this.type,currentFont:this.model,fontData:this.fontData}).render().el),this}})},{"../helpers/backbone":6,"../views/current-font":19,"../views/default-font-button":20,"../views/font-dropdown":25,"../views/font-size-control":26,"../views/font-variant-control":30}],25:[function(a,b,c){var d=a("debug")("jetpack-fonts"),e=a("../helpers/window-measures").getWidowHeight,f=a("../helpers/provider-views").getViewForProvider,g=a("../views/dropdown-template");b.exports=g.extend({className:"jetpack-fonts__menu",id:"font-select",initialize:function(a){g.prototype.initialize.call(this,a),this.fontData=a.fontData,this.currentFont=a.currentFont},render:function(){return this.fontData.each(function(a){var b=f(a.get("provider"));b&&(d("rendering providerView in font list for",a.toJSON()),this.$el.append(new b({model:a,type:this.type,currentFont:this.currentFont}).render().el))},this),this},open:function(){g.prototype.open.call(this),this.screenFit()},screenFit:function(){var a,b,c,d,f,g;if(this.$el.css({height:"",top:""}),a=20,b=e(),c=this.$el.offset(),d=this.$el.height(),!(a+c.top+d<=b)){if(f=b-2*a,f>=d)return g=f-d-c.top,void this.$el.css("top",g);g=a-c.top,this.$el.css({top:g+110,height:f-145})}}})},{"../helpers/provider-views":9,"../helpers/window-measures":11,"../views/dropdown-template":23,debug:34}],26:[function(a,b,c){var d=a("../helpers/backbone"),e=a("../views/font-size-dropdown"),f=a("../views/current-font-size");b.exports=d.View.extend({className:"jetpack-fonts__font-size-control font-property-control",initialize:function(a){this.menu="fontSize",this.type=a.type,this.fontData=a.fontData,this.currentFont=a.currentFont,this.listenTo(this.currentFont,"change",this.render)},getSelectedAvailableFont:function(){var a=this.fontData.findWhere({name:this.currentFont.get("name")});return a?a:!1},getCurrentFontSize:function(){var a=this.getSelectedAvailableFont();if(a){var b=this.currentFont.get("size");return b&&a.getFontSizeNameFromId(b)?a.getFontSizeNameFromId(b):"Normal Size"}},render:function(){return this.$el.html(""),this.$el.append(new f({type:this.type,menu:this.menu,currentFontSize:this.getCurrentFontSize()}).render().el),this.$el.append(new e({type:this.type,menu:this.menu,selectedAvailableFont:this.getSelectedAvailableFont(),currentFontSize:this.getCurrentFontSize()}).render().el),this}})},{"../helpers/backbone":6,"../views/current-font-size":17,"../views/font-size-dropdown":27}],27:[function(a,b,c){var d=a("../views/font-size-option"),e=a("../views/dropdown-template");b.exports=e.extend({className:"jetpack-fonts__font-size-dropdown font-property-control-dropdown",initialize:function(a){e.prototype.initialize.call(this,a),this.selectedAvailableFont=a.selectedAvailableFont,this.currentFontSize=a.currentFontSize},render:function(){if(this.$el.html(""),this.selectedAvailableFont){var a=this.selectedAvailableFont.getFontSizeOptions();a.forEach(function(a){this.$el.append(new d({type:this.type,id:a.id,name:a.name,currentFontSize:this.currentFontSize}).render().el)}.bind(this))}return this}})},{"../views/dropdown-template":23,"../views/font-size-option":28}],28:[function(a,b,c){var d=a("../helpers/backbone"),e=a("../helpers/emitter");b.exports=d.View.extend({className:"jetpack-fonts__font-size-option jetpack-fonts__font-property-option",events:{click:"setSizeOption"},initialize:function(a){this.type=a.type,this.id=a.id,this.name=a.name,this.currentFontSize=a.currentFontSize},render:function(){return this.$el.html(this.name),this.$el.attr("data-name",this.name),this.currentFontSize===this.name&&this.$el.addClass("current"),this},setSizeOption:function(){e.trigger("set-size",{size:this.id,type:this.type})}})},{"../helpers/backbone":6,"../helpers/emitter":8}],29:[function(a,b,c){var d=a("../helpers/backbone"),e=a("../helpers/emitter"),f=a("../views/font-control");b.exports=d.View.extend({className:"jetpack-fonts__type",events:{click:"closeMenus"},initialize:function(a){this.type=a.type,this.fontData=a.fontData,this.currentFont=a.currentFont},render:function(){return this.$el.append('<div class="jetpack-fonts__type" data-font-type="'+this.type.id+'"><h3 class="jetpack-fonts__type-header">'+this.type.name+"</h3></div>"),this.$el.append(new f({type:this.type,model:this.currentFont,fontData:this.fontData}).render().el),this},closeMenus:function(){e.trigger("close-open-menus")}})},{"../helpers/backbone":6,"../helpers/emitter":8,"../views/font-control":24}],30:[function(a,b,c){var d=a("../helpers/backbone"),e=a("../views/font-variant-dropdown"),f=a("../views/current-font-variant");b.exports=d.View.extend({className:"jetpack-fonts__font-variant-control font-property-control",initialize:function(a){this.menu="fontVariant",this.type=a.type,this.fontData=a.fontData,this.currentFont=a.currentFont,this.listenTo(this.currentFont,"change",this.render)},getSelectedAvailableFont:function(){var a=this.fontData.findWhere({name:this.currentFont.get("name")});return a?a:!1},getCurrentFontVariant:function(){var a=this.getSelectedAvailableFont();if(a&&this.type.fvdAdjust){var b=this.currentFont.get("fvds");return b&&1===Object.keys(b).length?a.getFontVariantNameFromId(b[0]):"Regular"}},render:function(){return this.currentFontView&&this.currentFontView.remove(),this.dropDownView&&this.dropDownView.remove(),this.currentFontView=new f({type:this.type,menu:this.menu,currentFontVariant:this.getCurrentFontVariant()}),this.dropDownView=new e({type:this.type,menu:this.menu,selectedAvailableFont:this.getSelectedAvailableFont(),currentFontVariant:this.getCurrentFontVariant()}),this.$el.append(this.currentFontView.render().el),this.$el.append(this.dropDownView.render().el),this}})},{"../helpers/backbone":6,"../views/current-font-variant":18,"../views/font-variant-dropdown":31}],31:[function(a,b,c){var d=a("../views/font-variant-option"),e=a("../views/dropdown-template");b.exports=e.extend({className:"jetpack-fonts__font-variant-dropdown font-property-control-dropdown",initialize:function(a){e.prototype.initialize.call(this,a),this.selectedAvailableFont=a.selectedAvailableFont,this.currentFontVariant=a.currentFontVariant},render:function(){if(this.$el.html(""),this.selectedAvailableFont&&this.type.fvdAdjust){var a=this.selectedAvailableFont.getFontVariantOptions();for(var b in a)this.$el.append(new d({type:this.type,id:b,name:a[b],currentFontVariant:this.currentFontVariant}).render().el)}return this}})},{"../views/dropdown-template":23,"../views/font-variant-option":32}],32:[function(a,b,c){var d=a("../helpers/backbone"),e=a("../helpers/emitter");b.exports=d.View.extend({className:"jetpack-fonts__font-variant-option jetpack-fonts__font-property-option",events:{click:"setVariantOption"},initialize:function(a){this.type=a.type,this.id=a.id,this.name=a.name,this.currentFontVariant=a.currentFontVariant},render:function(){return this.$el.html(this.name),this.$el.data("id",this.id),this.currentFontVariant===this.name&&this.$el.addClass("current"),this},setVariantOption:function(){e.trigger("set-variant",{variant:this.id,type:this.type})}})},{"../helpers/backbone":6,"../helpers/emitter":8}],33:[function(a,b,c){var d=a("../helpers/backbone"),e=a("../helpers/emitter"),f=a("debug")("jetpack-fonts"),g=a("../helpers/available-fonts"),h=a("../helpers/available-types"),i=a("../views/font-type"),j=a("../collections/available-fonts");a("../providers/google"),b.exports=d.View.extend({initialize:function(){f("init with currently selected fonts:",this.collection.toJSON()),this.headingFonts=new j(g),this.bodyFonts=new j(this.headingFonts.where({bodyText:!0})),this.listenTo(e,"change-font",this.updateCurrentFont),this.listenTo(e,"set-variant",this.setFontVariant),this.listenTo(e,"set-size",this.setFontSize)},setFontVariant:function(a){var b=this.findModelWithType(a.type);b.set("fvds",[a.variant]),e.trigger("close-open-menus")},setFontSize:function(a){var b=this.findModelWithType(a.type);b.set("size",a.size),e.trigger("close-open-menus")},updateCurrentFont:function(a){var b=this.findModelWithType(a.type);b.set(a.font.attributes),b.unset("size"),f("updateCurrentFont with",a.font.toJSON(),"to",b.toJSON()),e.trigger("close-open-menus")},render:function(){return this.$el.text(""),f("rendering controls for font types",h),h.forEach(this.renderTypeControl.bind(this)),this},renderTypeControl:function(a){var b;b=a.bodyText===!0?this.bodyFonts:this.headingFonts,this.$el.append(new i({type:a,currentFont:this.findModelWithType(a),fontData:b}).render().el)},findModelWithType:function(a){var b=this.collection.find(function(b){return b.get("type")===a.id});return b||(b=this.collection.add({type:a.id,name:"Default Theme font"})),b}})},{"../collections/available-fonts":1,"../helpers/available-fonts":4,"../helpers/available-types":5,"../helpers/backbone":6,"../helpers/emitter":8,"../providers/google":16,"../views/font-type":29,debug:34}],34:[function(a,b,c){function d(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function e(){var a=arguments,b=this.useColors;if(a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+c.humanize(this.diff),!b)return a;var d="color: "+this.color;a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,1));var e=0,f=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(f=e))}),a.splice(f,0,d),a}function f(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function g(a){try{null==a?localStorage.removeItem("debug"):localStorage.debug=a}catch(b){}}function h(){var a;try{a=localStorage.debug}catch(b){}return a}c=b.exports=a("./debug"),c.log=f,c.formatArgs=e,c.save=g,c.load=h,c.useColors=d,c.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],c.formatters.j=function(a){return JSON.stringify(a)},c.enable(h())},{"./debug":35}],35:[function(a,b,c){function d(){return c.colors[k++%c.colors.length]}function e(a){function b(){}function e(){var a=e,b=+new Date,f=b-(j||b);a.diff=f,a.prev=j,a.curr=b,j=b,null==a.useColors&&(a.useColors=c.useColors()),null==a.color&&a.useColors&&(a.color=d());var g=Array.prototype.slice.call(arguments);g[0]=c.coerce(g[0]),"string"!=typeof g[0]&&(g=["%o"].concat(g));var h=0;g[0]=g[0].replace(/%([a-z%])/g,function(b,d){if("%%"===b)return b;h++;var e=c.formatters[d];if("function"==typeof e){var f=g[h];b=e.call(a,f),g.splice(h,1),h--}return b}),"function"==typeof c.formatArgs&&(g=c.formatArgs.apply(a,g));var i=e.log||c.log||console.log.bind(console);i.apply(a,g)}b.enabled=!1,e.enabled=!0;var f=c.enabled(a)?e:b;return f.namespace=a,f}function f(a){c.save(a);for(var b=(a||"").split(/[\s,]+/),d=b.length,e=0;d>e;e++)b[e]&&(a=b[e].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$")))}function g(){c.enable("")}function h(a){var b,d;for(b=0,d=c.skips.length;d>b;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;d>b;b++)if(c.names[b].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}c=b.exports=e,c.coerce=i,c.disable=g,c.enable=f,c.enabled=h,c.humanize=a("ms"),c.names=[],c.skips=[],c.formatters={};var j,k=0},{ms:36}],36:[function(a,b,c){function d(a){var b=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]),d=(b[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"y":return c*l;case"days":case"day":case"d":return c*k;case"hours":case"hour":case"h":return c*j;case"minutes":case"minute":case"m":return c*i;case"seconds":case"second":case"s":return c*h;case"ms":return c}}}function e(a){return a>=k?Math.round(a/k)+"d":a>=j?Math.round(a/j)+"h":a>=i?Math.round(a/i)+"m":a>=h?Math.round(a/h)+"s":a+"ms"}function f(a){return g(a,k,"day")||g(a,j,"hour")||g(a,i,"minute")||g(a,h,"second")||a+" ms"}function g(a,b,c){return b>a?void 0:1.5*b>a?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var h=1e3,i=60*h,j=60*i,k=24*j,l=365.25*k;b.exports=function(a,b){return b=b||{},"string"==typeof a?d(a):b["long"]?f(a):e(a)}},{}]},{},[12]);