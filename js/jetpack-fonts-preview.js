!function i(s,a,c){function u(t,e){if(!a[t]){if(!s[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=a[t]={exports:{}};s[t][0].call(o.exports,function(e){return u(s[t][1][e]||e)},o,o.exports,i,s,a,c)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({1:[function(e,t,i){function n(){var e;try{e=localStorage.debug}catch(e){}return e}(i=t.exports=e("./debug")).log=function(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)},i.formatArgs=function(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+i.humanize(this.diff),!t)return e;var n="color: "+this.color;e=[e[0],n,"color: inherit"].concat(Array.prototype.slice.call(e,1));var r=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))}),e.splice(o,0,n),e},i.save=function(e){try{null==e?localStorage.removeItem("debug"):localStorage.debug=e}catch(e){}},i.load=n,i.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)},i.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],i.formatters.j=function(e){return JSON.stringify(e)},i.enable(n())},{"./debug":2}],2:[function(e,t,a){(a=t.exports=function(e){function t(){}function n(){var o=n,e=+new Date,t=e-(c||e);o.diff=t,o.prev=c,o.curr=e,c=e,null==o.useColors&&(o.useColors=a.useColors()),null==o.color&&o.useColors&&(o.color=a.colors[u++%a.colors.length]);var i=Array.prototype.slice.call(arguments);i[0]=a.coerce(i[0]),"string"!=typeof i[0]&&(i=["%o"].concat(i));var s=0;i[0]=i[0].replace(/%([a-z%])/g,function(e,t){if("%%"===e)return e;s++;var n=a.formatters[t];if("function"==typeof n){var r=i[s];e=n.call(o,r),i.splice(s,1),s--}return e}),"function"==typeof a.formatArgs&&(i=a.formatArgs.apply(o,i)),(n.log||a.log||console.log.bind(console)).apply(o,i)}t.enabled=!1,n.enabled=!0;var r=a.enabled(e)?n:t;return r.namespace=e,r}).coerce=function(e){return e instanceof Error?e.stack||e.message:e},a.disable=function(){a.enable("")},a.enable=function(e){a.save(e);for(var t=(e||"").split(/[\s,]+/),n=t.length,r=0;r<n;r++)t[r]&&("-"===(e=t[r].replace(/\*/g,".*?"))[0]?a.skips.push(new RegExp("^"+e.substr(1)+"$")):a.names.push(new RegExp("^"+e+"$")))},a.enabled=function(e){var t,n;for(t=0,n=a.skips.length;t<n;t++)if(a.skips[t].test(e))return!1;for(t=0,n=a.names.length;t<n;t++)if(a.names[t].test(e))return!0;return!1},a.humanize=e("ms"),a.names=[],a.skips=[],a.formatters={};var c,u=0},{ms:7}],3:[function(e,t,n){var r=e("own"),u=/\s+/g,o={compact:function(e){for(var t,n,r,o,i=["n","4"],s=(e||"").split(";"),a=0;a<s.length;a++)if(2===(t=s[a].replace(u,"").split(":")).length&&(n=t[0],r=t[1],o=this.values[n]))for(var c=0;c<o.length;c++)o[c][1]===r&&(i[this.properties.indexOf(n)]=o[c][0]);return i.join("")}};n.create=function(e,t){return Object.create(o,r({properties:e,values:t}))}},{own:8}],4:[function(e,t,n){var r=e("own"),o={expand:function(e){if("string"!=typeof e||2!==e.length)return null;for(var t,n,r,o,i=[null,null],s=0;s<this.properties.length;s++)for(t=e[s],n=this.properties[s],r=this.values[n],j=0;j<r.length;j++)(o=r[j])[0]===t&&(i[s]=[this.properties[s],o[1]].join(":"));return i.indexOf(null)<0?i.join(";")+";":null}};n.create=function(e,t){return Object.create(o,r({properties:e,values:t}))}},{own:8}],5:[function(e,t,n){var r,o,i,s=e("./compactor"),a=e("./expander"),c=e("./parser"),u=["font-style","font-weight"],l={"font-style":[["n","normal"],["i","italic"],["o","oblique"]],"font-weight":[["4","normal"],["7","bold"],["1","100"],["2","200"],["3","300"],["4","400"],["5","500"],["6","600"],["7","700"],["8","800"],["9","900"]]};n.compact=function(e){r=r||s.create(u,l);return r.compact(e)},n.expand=function(e){o=o||a.create(u,l);return o.expand(e)},n.parse=function(e){i=i||c.create(u,l);return i.parse(e)}},{"./compactor":3,"./expander":4,"./parser":6}],6:[function(e,t,n){var r=e("own"),o={parse:function(e){if("string"!=typeof e||2!==e.length)return null;for(var t,n,r,o,i={},s=0;s<this.properties.length;s++)for(t=e[s],n=this.properties[s],r=this.values[n],j=0;j<r.length;j++)(o=r[j])[0]===t&&(i[this.properties[s]]=o[1]);return i[this.properties[0]]&&i[this.properties[1]]?i:null}};n.create=function(e,t){return Object.create(o,r({properties:e,values:t}))}},{own:8}],7:[function(e,t,n){var o=36e5,i=864e5;function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(e,t){t=t||{};var n,r=typeof e;if("string"==r&&0<e.length)return function(e){if(100<(e=String(e)).length)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*i;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"==r&&!1===isNaN(e))return t.long?s(n=e,i,"day")||s(n,o,"hour")||s(n,6e4,"minute")||s(n,1e3,"second")||n+" ms":function(e){if(i<=e)return Math.round(e/i)+"d";if(o<=e)return Math.round(e/o)+"h";if(6e4<=e)return Math.round(e/6e4)+"m";if(1e3<=e)return Math.round(e/1e3)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],8:[function(e,t,n){function r(e,t,n){if(e===Object(e)){var r,o={};for(r in e)e.hasOwnProperty(r)&&(o[r]=Object.getOwnPropertyDescriptor(e,r),"boolean"==typeof t&&(o[r].writable=t),"boolean"==typeof n&&(o[r].configurable=n));return o}}r.readonly=function(e){return r(e,!1,!1)},t.exports=r},{}],9:[function(e,t,n){t.exports=e("./bootstrap").annotations},{"./bootstrap":13}],10:[function(e,t,n){t.exports=window.wp.customize},{}],11:[function(e,t,n){var r=e("../helpers/bootstrap");var o=[];r&&r.types&&(o=r.types.sort(function(e,t){return"headings"===e.id?-1:"headings"===t.id?1:0}),o=o.reduce(function(e,t){return"site-title"!==t.id&&e.push(t),e},[])),t.exports=o},{"../helpers/bootstrap":13}],12:[function(e,t,n){t.exports=Backbone},{}],13:[function(e,t,n){var r=window._JetpackFonts;t.exports=r},{}],14:[function(e,t,n){var r=e("../helpers/backbone"),o=e("../helpers/underscore");t.exports=o.extend(r.Events)},{"../helpers/backbone":12,"../helpers/underscore":18}],15:[function(e,t,n){var r=e("../helpers/api"),o=e("debug")("jetpack-fonts:live-update"),i=e("../helpers/preview-styles"),s=e("../helpers/provider-views").getViewForProvider;function a(e){var t=s(e.provider);t?t.addFontToPreview(e):o("live update failed because no provider could be found for",e)}function c(e){e=function(n){if(n.length)return n;o("warning: selectedFonts is not an array. trying to convert",n);var e=Object.keys(n);return e&&e.length?e.reduce(function(e,t){return n[t]&&n[t].provider&&e.push(n[t]),e},[]):[]}(e),o("rendering live update for new styles",e),e&&e.forEach(a),i.writeFontStyles(e)}e("../providers/google"),t.exports={liveUpdateFontsInPreview:c},r.bind("preview-ready",function(){o("binding live updates for custom-fonts"),r("jetpack_fonts[selected_fonts]",function(e){e.bind(function(e){c(e)})}),c(r("jetpack_fonts[selected_fonts]").get())})},{"../helpers/api":10,"../helpers/preview-styles":16,"../helpers/provider-views":17,"../providers/google":20,debug:1}],16:[function(e,t,n){var r=e("../helpers/backbone").$,i=e("debug")("jetpack-fonts:preview-css"),s=e("fvd"),a=e("../helpers/available-types"),o=e("../helpers/annotations");function c(e){return o?(i("generating css for style type",e.type,"using these annotations:",o[e.type]),!o[e.type]||o[e.type].length<1?(i("no annotations found for style type",e.type,"; existing annotations:",o),""):o[e.type].map(function(e,t){if(!t.selector)return"";i("generateCssForAnnotation for style",e.cssName,"and annotation",t);var n="";if(e.cssName&&function(e){var t=!1;return u(e).forEach(function(e){e.value&&"font-family"===e.property&&"inherit"!==e.value&&(t=!0)}),t}(t)){var r=function(e){return e.fontFamilies||e.cssName}(e);r&&0<r.length&&(n+="font-family:"+r+";")}!function(n){if(a.length<1)return i("cannot tell if ",n," is adjustable: no availableTypes"),!1;return a.reduce(function(e,t){return t.id===n&&!0===t.fvdAdjust||e},!1)}(e.type)||(n+="font-weight:"+function(e,t){if(e){var n=s.parse(e);if(n&&n["font-weight"])return n["font-weight"]}var r=function(e){var t;return u(e).forEach(function(e){e.value&&"font-weight"===e.property&&(t=e.value)}),t}(t);if(r)return r;return"400"}(e.currentFvd,t)+";",n+="font-style:"+function(e,t){if(e){var n=s.parse(e);if(n&&n["font-style"])return n["font-style"]}var r=function(e){var t;return u(e).forEach(function(e){e.value&&"font-style"===e.property&&(t=e.value)}),t}(t);if(r)return r;return"normal"}(e.currentFvd,t)+";");if(e.size){var o=function(e,t){var n=function(e){var t;return u(e).forEach(function(e){e.value&&"font-size"===e.property&&!/^inherit/.test(e.value)&&(t=e.value)}),t}(t);if(!n)return;var r=function(e){var t=e.match(/[\d\.]+([A-Za-z]{2,3}|%)/);return t&&t[1]?t[1]:void 0}(n),o=function(e){var t,n,r=e.match(/((\d*\.(\d+))|(\d+))([A-Za-z]{2,3}|%)/);if(!r)return;n=r[4]?(t=parseInt(r[4],10),9<t?1:3):(t=parseFloat(r[2]),r[3].length+1);return t.toFixed(n)}(n);return r&&o?((.06*parseInt(e,10)+1)*o).toFixed(1)+r:void i("unable to parse size annotation",n)}(e.size,t);o&&0<o.length&&(n+="font-size:"+o+";")}return n.length&&(n=function(e){return e.split(/,\s*/).reduce(function(e,t){return e.push(".wf-active "+t),e},[]).join(", ")}(t.selector)+" {"+n+"}",i("generated css for",e,"is",n)),n}.bind(null,e)).join(" ")):(i("no annotations found at all; cannot generate css"),"")}function u(e){return e.rules&&e.rules.length?e.rules:(i("no annotation rules found for",e),[])}var l={getFontStyleElement:function(){return r("#jetpack-custom-fonts-css")[0]},writeFontStyles:function(e){l.removeFontStyleElement(),o=l.maybeMergeAnnotationsForStyles(o,e);var t=l.generateCssFromStyles(e);i("css generation complete:",t),l.addStyleElementToPage(l.createStyleElementWith(t))},maybeMergeAnnotationsForStyles:function(e,t){if(e)return e["site-title"]&&e.headings&&(t.length&&t.some(function(e){return"site-title"===e.type})||(i("merging site-title annotations into headings"),e.headings=e.headings.concat(e["site-title"]),delete e["site-title"])),e},generateCssFromStyles:function(e){return e?(i("generating css for styles",e),e.reduce(function(e,t){var n=c(t);return n&&(e+=" "+n),e},".wf-active > body { font-weight: 400; }")):(i("generating empty css because there are no styles"),"")},createStyleElementWith:function(e){return r('<style id="jetpack-custom-fonts-css">'+e+"</style>")},removeFontStyleElement:function(){var e=l.getFontStyleElement();e&&r(e).remove()},addStyleElementToPage:function(e){r("head").prepend(e)}};t.exports=l},{"../helpers/annotations":9,"../helpers/available-types":11,"../helpers/backbone":12,debug:1,fvd:5}],17:[function(e,t,n){var r=e("../helpers/api"),o=e("debug")("jetpack-fonts:provider-views"),i=e("../views/dropdown-item");r.JetpackFonts||(r.JetpackFonts={}),r.JetpackFonts.providerViews||(r.JetpackFonts.providerViews={}),r.JetpackFonts.ProviderView=i.extend({mouseenter:function(){},mouseleave:function(){}});var s={};t.exports={getViewForProvider:function(e){return o("importing provider views from",r.JetpackFonts.providerViews),r.JetpackFonts.providerViews&&Object.keys(r.JetpackFonts.providerViews).forEach(function(e){s[e]=r.JetpackFonts.providerViews[e]}),s[e]?(o("found view for provider",e),s[e]):(o("no view found for provider",e),null)}}},{"../helpers/api":10,"../views/dropdown-item":21,debug:1}],18:[function(e,t,n){t.exports=_},{}],19:[function(e,t,n){t.exports=WebFont},{}],20:[function(e,t,n){var r=e("../helpers/api"),o=e("../helpers/bootstrap"),i=e("../helpers/webfont"),s=[];var a=r.JetpackFonts.ProviderView.extend({render:function(){var e,t;return this.$el.html(this.model.get("displayName")),this.$el.css("font-family",'"'+this.model.get("cssName")+'"'),this.currentFont&&this.currentFont.get("id")===this.model.get("id")?this.$el.addClass("active"):this.$el.removeClass("active"),e=this.model.toJSON(),t=this.model.get("id"),~s.indexOf(e.id)||(s.push(e.id),i.load({google:{families:[e.id],text:t},classes:!1,events:!1})),this}});a.addFontToPreview=function(e){if(!~s.indexOf(e.id)){s.push(e.id);var t=e.id+":100,200,300,400,500,600,700,800,900,100italic,200italic,300italic,400italic,500italic,600italic,700italic,800italic,900italic";if(o.providerData&&o.providerData.googleSubsetString){var n=o.providerData.googleSubsetString;n&&0<n.length&&(t+=":"+n)}i.load({google:{families:[t]}})}},r.JetpackFonts.providerViews.google=a,t.exports=a},{"../helpers/api":10,"../helpers/bootstrap":13,"../helpers/webfont":19}],21:[function(e,t,n){var r=e("../helpers/backbone"),o=e("../helpers/emitter"),i=r.View.extend({className:"jetpack-fonts__option",events:{click:"fontChanged"},initialize:function(e){this.type=e.type,this.currentFont=e.currentFont,this.currentFont&&this.listenTo(this.currentFont,"change",this.render)},render:function(){return this.$el.html(this.model.get("displayName")),this},fontChanged:function(){this.currentFont&&this.currentFont!==this.model&&o.trigger("change-font",{font:this.model,type:this.type.id})}});i.addFontToControls=function(){},t.exports=i},{"../helpers/backbone":12,"../helpers/emitter":14}]},{},[15]);