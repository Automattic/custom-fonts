!function r(o,s,i){function a(t,e){if(!s[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=s[t]={exports:{}},o[t][0].call(n.exports,function(e){return a(o[t][1][e]||e)},n,n.exports,r,o,s,i)}return s[t].exports}for(var c="function"==typeof require&&require,e=0;e<i.length;e++)a(i[e]);return a}({1:[function(e,t,o){function n(){var e;try{e=localStorage.debug}catch(e){}return e}(o=t.exports=e("./debug")).log=function(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)},o.formatArgs=function(){var t,n,e=arguments,r=this.useColors;return e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+o.humanize(this.diff),r&&(r="color: "+this.color,(e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1)))[n=t=0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(t++,"%c"===e&&(n=t))}),e.splice(n,0,r)),e},o.save=function(e){try{null==e?localStorage.removeItem("debug"):localStorage.debug=e}catch(e){}},o.load=n,o.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)},o.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],o.formatters.j=function(e){return JSON.stringify(e)},o.enable(n())},{"./debug":2}],2:[function(e,t,i){(i=t.exports=function(e){function t(){}function n(){var r=n,e=+new Date,t=e-(a||e),o=(r.diff=t,r.prev=a,r.curr=e,a=e,null==r.useColors&&(r.useColors=i.useColors()),null==r.color&&r.useColors&&(r.color=i.colors[c++%i.colors.length]),Array.prototype.slice.call(arguments)),s=(o[0]=i.coerce(o[0]),"string"!=typeof o[0]&&(o=["%o"].concat(o)),0);o[0]=o[0].replace(/%([a-z%])/g,function(e,t){var n;return"%%"!==e&&(s++,"function"==typeof(t=i.formatters[t])&&(n=o[s],e=t.call(r,n),o.splice(s,1),s--)),e}),"function"==typeof i.formatArgs&&(o=i.formatArgs.apply(r,o)),(n.log||i.log||console.log.bind(console)).apply(r,o)}t.enabled=!1,n.enabled=!0;var r=i.enabled(e)?n:t;return r.namespace=e,r}).coerce=function(e){return e instanceof Error?e.stack||e.message:e},i.disable=function(){i.enable("")},i.enable=function(e){i.save(e);for(var t=(e||"").split(/[\s,]+/),n=t.length,r=0;r<n;r++)t[r]&&("-"===(e=t[r].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+e.substr(1)+"$")):i.names.push(new RegExp("^"+e+"$")))},i.enabled=function(e){var t,n;for(t=0,n=i.skips.length;t<n;t++)if(i.skips[t].test(e))return!1;for(t=0,n=i.names.length;t<n;t++)if(i.names[t].test(e))return!0;return!1},i.humanize=e("ms"),i.names=[],i.skips=[],i.formatters={};var a,c=0},{ms:7}],3:[function(e,t,n){var r=e("own"),l=/\s+/g,o={compact:function(e){for(var t,n,r,o,s=["n","4"],i=(e||"").split(";"),a=0;a<i.length;a++)if(2===(t=i[a].replace(l,"").split(":")).length&&(n=t[0],r=t[1],o=this.values[n]))for(var c=0;c<o.length;c++)o[c][1]===r&&(s[this.properties.indexOf(n)]=o[c][0]);return s.join("")}};n.create=function(e,t){return Object.create(o,r({properties:e,values:t}))}},{own:8}],4:[function(e,t,n){var r=e("own"),o={expand:function(e){if("string"!=typeof e||2!==e.length)return null;for(var t,n,r,o,s=[null,null],i=0;i<this.properties.length;i++)for(t=e[i],n=this.properties[i],r=this.values[n],j=0;j<r.length;j++)(o=r[j])[0]===t&&(s[i]=[this.properties[i],o[1]].join(":"));return s.indexOf(null)<0?s.join(";")+";":null}};n.create=function(e,t){return Object.create(o,r({properties:e,values:t}))}},{own:8}],5:[function(e,t,n){var r,o,s,i=e("./compactor"),a=e("./expander"),c=e("./parser"),l=["font-style","font-weight"],u={"font-style":[["n","normal"],["i","italic"],["o","oblique"]],"font-weight":[["4","normal"],["7","bold"],["1","100"],["2","200"],["3","300"],["4","400"],["5","500"],["6","600"],["7","700"],["8","800"],["9","900"]]};n.compact=function(e){r=r||i.create(l,u);return r.compact(e)},n.expand=function(e){o=o||a.create(l,u);return o.expand(e)},n.parse=function(e){s=s||c.create(l,u);return s.parse(e)}},{"./compactor":3,"./expander":4,"./parser":6}],6:[function(e,t,n){var r=e("own"),o={parse:function(e){if("string"!=typeof e||2!==e.length)return null;for(var t,n,r,o,s={},i=0;i<this.properties.length;i++)for(t=e[i],n=this.properties[i],r=this.values[n],j=0;j<r.length;j++)(o=r[j])[0]===t&&(s[this.properties[i]]=o[1]);return s[this.properties[0]]&&s[this.properties[1]]?s:null}};n.create=function(e,t){return Object.create(o,r({properties:e,values:t}))}},{own:8}],7:[function(e,t,n){var o=36e5,s=864e5;function i(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(e,t){t=t||{};var n=typeof e;if(!("string"==n&&0<e.length)){if("number"==n&&!1===isNaN(e))if(t.long)return i(n=e,s,"day")||i(n,o,"hour")||i(n,6e4,"minute")||i(n,1e3,"second")||n+" ms";else{t=e;return s<=t?Math.round(t/s)+"d":o<=t?Math.round(t/o)+"h":6e4<=t?Math.round(t/6e4)+"m":1e3<=t?Math.round(t/1e3)+"s":t+"ms"}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}n=e;if(!(100<(n=String(n)).length)){n=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(n);if(n){var r=parseFloat(n[1]);switch((n[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"days":case"day":case"d":return r*s;case"hours":case"hour":case"hrs":case"hr":case"h":return r*o;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*r;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}},{}],8:[function(e,t,n){function r(e,t,n){if(e===Object(e)){var r,o={};for(r in e)e.hasOwnProperty(r)&&(o[r]=Object.getOwnPropertyDescriptor(e,r),"boolean"==typeof t&&(o[r].writable=t),"boolean"==typeof n&&(o[r].configurable=n));return o}}r.readonly=function(e){return r(e,!1,!1)},t.exports=r},{}],9:[function(e,t,n){t.exports=e("./bootstrap").annotations},{"./bootstrap":13}],10:[function(e,t,n){t.exports=window.wp.customize},{}],11:[function(e,t,n){e=e("../helpers/bootstrap");var r=[];e&&e.types&&(r=(r=e.types.sort(function(e,t){return"headings"===e.id?-1:"headings"===t.id?1:0})).reduce(function(e,t){return"site-title"!==t.id&&e.push(t),e},[])),t.exports=r},{"../helpers/bootstrap":13}],12:[function(e,t,n){t.exports=Backbone},{}],13:[function(e,t,n){var r=window._JetpackFonts;t.exports=r},{}],14:[function(e,t,n){var r=e("../helpers/backbone"),e=e("../helpers/underscore");t.exports=e.extend(r.Events)},{"../helpers/backbone":12,"../helpers/underscore":18}],15:[function(e,t,n){var r=e("../helpers/api"),o=e("debug")("jetpack-fonts:live-update"),s=e("../helpers/preview-styles"),i=e("../helpers/provider-views").getViewForProvider;function a(e){var t=i(e.provider);t?t.addFontToPreview(e):o("live update failed because no provider could be found for",e)}function c(e){e=function(n){if(n.length)return n;o("warning: selectedFonts is not an array. trying to convert",n);var e=Object.keys(n);return e&&e.length?e.reduce(function(e,t){return n[t]&&n[t].provider&&e.push(n[t]),e},[]):[]}(e),o("rendering live update for new styles",e),e&&e.forEach(a),s.writeFontStyles(e)}e("../providers/google"),t.exports={liveUpdateFontsInPreview:c},r.bind("preview-ready",function(){o("binding live updates for custom-fonts"),r("jetpack_fonts[selected_fonts]",function(e){e.bind(function(e){c(e)})}),c(r("jetpack_fonts[selected_fonts]").get())})},{"../helpers/api":10,"../helpers/preview-styles":16,"../helpers/provider-views":17,"../providers/google":20,debug:1}],16:[function(e,t,n){var r=e("../helpers/backbone").$,o=e("debug")("jetpack-fonts:preview-css"),s=e("fvd"),i=e("../helpers/available-types"),a=e("../helpers/annotations");function c(e){return a?(o("generating css for style type",e.type,"using these annotations:",a[e.type]),!a[e.type]||a[e.type].length<1?(o("no annotations found for style type",e.type,"; existing annotations:",a),""):a[e.type].map(function(e,t){if(!t.selector)return"";o("generateCssForAnnotation for style",e.cssName,"and annotation",t);var n="";e.cssName&&function(e){var t=!1;return l(e).forEach(function(e){e.value&&"font-family"===e.property&&"inherit"!==e.value&&(t=!0)}),t}(t)&&((r=function(e){return e.fontFamilies||e.cssName}(e))&&0<r.length&&(n+="font-family:"+r+";"));!function(n){if(i.length<1)return void o("cannot tell if ",n," is adjustable: no availableTypes");return i.reduce(function(e,t){return t.id===n&&!0===t.fvdAdjust||e},!1)}(e.type)||(n=(n+="font-weight:"+function(e,t){if(e){e=s.parse(e);if(e&&e["font-weight"])return e["font-weight"]}e=function(e){var t;return l(e).forEach(function(e){e.value&&"font-weight"===e.property&&(t=e.value)}),t}(t);if(e)return e;return"400"}(e.currentFvd,t)+";")+"font-style:"+function(e,t){if(e){e=s.parse(e);if(e&&e["font-style"])return e["font-style"]}e=function(e){var t;return l(e).forEach(function(e){e.value&&"font-style"===e.property&&(t=e.value)}),t}(t);if(e)return e;return"normal"}(e.currentFvd,t)+";");{var r;!e.size||(r=function(e,t){t=function(e){var t;return l(e).forEach(function(e){e.value&&"font-size"===e.property&&!/^inherit/.test(e.value)&&(t=e.value)}),t}(t);if(t){var n=function(e){e=e.match(/[\d\.]+([A-Za-z]{2,3}|%)/);if(e&&e[1])return e[1]}(t),r=function(e){var t,e=e.match(/((\d*\.(\d+))|(\d+))([A-Za-z]{2,3}|%)/);if(e)return e=e[4]?9<(t=parseInt(e[4],10))?1:3:(t=parseFloat(e[2]),e[3].length+1),t.toFixed(e)}(t);if(n&&r)return((.06*parseInt(e,10)+1)*r).toFixed(1)+n;o("unable to parse size annotation",t)}}(e.size,t))&&0<r.length&&(n+="font-size:"+r+";")}return n.length&&(n=function(e){return e.split(/,\s*/).reduce(function(e,t){return e.push(".wf-active "+t),e},[]).join(", ")}(t.selector)+" {"+n+"}",o("generated css for",e,"is",n)),n}.bind(null,e)).join(" ")):(o("no annotations found at all; cannot generate css"),"")}function l(e){return e.rules&&e.rules.length?e.rules:(o("no annotation rules found for",e),[])}var u={getFontStyleElement:function(){return r("#jetpack-custom-fonts-css")[0]},writeFontStyles:function(e){u.removeFontStyleElement(),a=u.maybeMergeAnnotationsForStyles(a,e);e=u.generateCssFromStyles(e);o("css generation complete:",e),u.addStyleElementToPage(u.createStyleElementWith(e))},maybeMergeAnnotationsForStyles:function(e,t){if(e)return e["site-title"]&&e.headings&&(t.length&&t.some(function(e){return"site-title"===e.type})||(o("merging site-title annotations into headings"),e.headings=e.headings.concat(e["site-title"]),delete e["site-title"])),e},generateCssFromStyles:function(e){return e?(o("generating css for styles",e),e.reduce(function(e,t){t=c(t);return t&&(e+=" "+t),e},".wf-active > body { font-weight: 400; }")):(o("generating empty css because there are no styles"),"")},createStyleElementWith:function(e){return r('<style id="jetpack-custom-fonts-css">'+e+"</style>")},removeFontStyleElement:function(){var e=u.getFontStyleElement();e&&r(e).remove()},addStyleElementToPage:function(e){r("head").prepend(e)}};t.exports=u},{"../helpers/annotations":9,"../helpers/available-types":11,"../helpers/backbone":12,debug:1,fvd:5}],17:[function(e,t,n){var r=e("../helpers/api"),o=e("debug")("jetpack-fonts:provider-views"),e=e("../views/dropdown-item"),s=(r.JetpackFonts||(r.JetpackFonts={}),r.JetpackFonts.providerViews||(r.JetpackFonts.providerViews={}),r.JetpackFonts.ProviderView=e.extend({mouseenter:function(){},mouseleave:function(){}}),{});t.exports={getViewForProvider:function(e){return o("importing provider views from",r.JetpackFonts.providerViews),r.JetpackFonts.providerViews&&Object.keys(r.JetpackFonts.providerViews).forEach(function(e){s[e]=r.JetpackFonts.providerViews[e]}),s[e]?(o("found view for provider",e),s[e]):(o("no view found for provider",e),null)}}},{"../helpers/api":10,"../views/dropdown-item":21,debug:1}],18:[function(e,t,n){t.exports=_},{}],19:[function(e,t,n){t.exports=WebFont},{}],20:[function(e,t,n){var r=e("../helpers/api"),o=e("../helpers/bootstrap"),s=e("../helpers/webfont"),i=[];e=r.JetpackFonts.ProviderView.extend({render:function(){var e,t;return this.$el.html(this.model.get("displayName")),this.$el.css("font-family",'"'+this.model.get("cssName")+'"'),this.currentFont&&this.currentFont.get("id")===this.model.get("id")?this.$el.addClass("active"):this.$el.removeClass("active"),this.disableFocus||this.$el.attr("tabindex","0"),e=this.model.toJSON(),t=this.model.get("id"),~i.indexOf(e.id)||(i.push(e.id),s.load({google:{families:[e.id],text:t},classes:!1,events:!1})),this}});e.addFontToPreview=function(e){var t;~i.indexOf(e.id)||(i.push(e.id),e=e.id+":100,200,300,400,500,600,700,800,900,100italic,200italic,300italic,400italic,500italic,600italic,700italic,800italic,900italic",o.providerData&&o.providerData.googleSubsetString&&((t=o.providerData.googleSubsetString)&&0<t.length&&(e+=":"+t)),s.load({google:{families:[e]}}))},r.JetpackFonts.providerViews.google=e,t.exports=e},{"../helpers/api":10,"../helpers/bootstrap":13,"../helpers/webfont":19}],21:[function(e,t,n){var r=e("../helpers/backbone"),o=e("../helpers/emitter"),e=r.View.extend({className:"jetpack-fonts__option",events:{click:"fontChanged",keydown:"checkKeyboardSelect"},initialize:function(e){this.type=e.type,this.currentFont=e.currentFont,this.disableFocus=Boolean(e.disableFocus),this.currentFont&&this.listenTo(this.currentFont,"change",this.render)},checkKeyboardSelect:function(e){"Enter"===e.key&&this.$el.click()},render:function(){return this.$el.html(this.model.get("displayName")),this},fontChanged:function(){this.currentFont&&this.currentFont!==this.model&&o.trigger("change-font",{font:this.model,type:this.type.id})}});e.addFontToControls=function(){},t.exports=e},{"../helpers/backbone":12,"../helpers/emitter":14}]},{},[15]);