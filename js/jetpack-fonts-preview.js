!function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r),e}function i(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?localStorage.removeItem("debug"):localStorage.debug=e}catch(t){}}function a(){var e;try{e=localStorage.debug}catch(t){}return e}n=t.exports=e("./debug"),n.log=i,n.formatArgs=o,n.save=s,n.load=a,n.useColors=r,n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(a())},{"./debug":2}],2:[function(e,t,n){function r(){return n.colors[l++%n.colors.length]}function o(e){function t(){}function o(){var e=o,t=+new Date,i=t-(u||t);e.diff=i,e.prev=u,e.curr=t,u=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=r());var s=Array.prototype.slice.call(arguments);s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,r){if("%%"===t)return t;a++;var o=n.formatters[r];if("function"==typeof o){var i=s[a];t=o.call(e,i),s.splice(a,1),a--}return t}),"function"==typeof n.formatArgs&&(s=n.formatArgs.apply(e,s));var c=o.log||n.log||console.log.bind(console);c.apply(e,s)}t.enabled=!1,o.enabled=!0;var i=n.enabled(e)?o:t;return i.namespace=e,i}function i(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,o=0;r>o;o++)t[o]&&(e=t[o].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function s(){n.enable("")}function a(e){var t,r;for(t=0,r=n.skips.length;r>t;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;r>t;t++)if(n.names[t].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=o,n.coerce=c,n.disable=s,n.enable=i,n.enabled=a,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var u,l=0},{ms:7}],3:[function(e,t,n){function r(e,t){return Object.create(s,o({properties:e,values:t}))}var o=e("own"),i=/\s+/g,s={compact:function(e){for(var t,n,r,o,s=["n","4"],a=(e||"").split(";"),c=0;c<a.length;c++)if(t=a[c].replace(i,"").split(":"),2===t.length&&(n=t[0],r=t[1],o=this.values[n]))for(var u=0;u<o.length;u++)o[u][1]===r&&(s[this.properties.indexOf(n)]=o[u][0]);return s.join("")}};n.create=r},{own:8}],4:[function(e,t,n){function r(e,t){return Object.create(i,o({properties:e,values:t}))}var o=e("own"),i={expand:function(e){if("string"!=typeof e||2!==e.length)return null;for(var t,n,r,o,i=[null,null],s=0;s<this.properties.length;s++)for(t=e[s],n=this.properties[s],r=this.values[n],j=0;j<r.length;j++)o=r[j],o[0]===t&&(i[s]=[this.properties[s],o[1]].join(":"));return i.indexOf(null)<0?i.join(";")+";":null}};n.create=r},{own:8}],5:[function(e,t,n){function r(e){return s||(s=u.create(p,d)),s.compact(e)}function o(e){return a||(a=l.create(p,d)),a.expand(e)}function i(e){return c||(c=f.create(p,d)),c.parse(e)}var s,a,c,u=e("./compactor"),l=e("./expander"),f=e("./parser"),p=["font-style","font-weight"],d={"font-style":[["n","normal"],["i","italic"],["o","oblique"]],"font-weight":[["4","normal"],["7","bold"],["1","100"],["2","200"],["3","300"],["4","400"],["5","500"],["6","600"],["7","700"],["8","800"],["9","900"]]};n.compact=r,n.expand=o,n.parse=i},{"./compactor":3,"./expander":4,"./parser":6}],6:[function(e,t,n){function r(e,t){return Object.create(i,o({properties:e,values:t}))}var o=e("own"),i={parse:function(e){if("string"!=typeof e||2!==e.length)return null;for(var t,n,r,o,i={},s=0;s<this.properties.length;s++)for(t=e[s],n=this.properties[s],r=this.values[n],j=0;j<r.length;j++)o=r[j],o[0]===t&&(i[this.properties[s]]=o[1]);return i[this.properties[0]]&&i[this.properties[1]]?i:null}};n.create=r},{own:8}],7:[function(e,t){function n(e){var t=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"y":return n*l;case"days":case"day":case"d":return n*u;case"hours":case"hour":case"h":return n*c;case"minutes":case"minute":case"m":return n*a;case"seconds":case"second":case"s":return n*s;case"ms":return n}}}function r(e){return e>=u?Math.round(e/u)+"d":e>=c?Math.round(e/c)+"h":e>=a?Math.round(e/a)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function o(e){return i(e,u,"day")||i(e,c,"hour")||i(e,a,"minute")||i(e,s,"second")||e+" ms"}function i(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=1e3,a=60*s,c=60*a,u=24*c,l=365.25*u;t.exports=function(e,t){return t=t||{},"string"==typeof e?n(e):t["long"]?o(e):r(e)}},{}],8:[function(e,t){function n(e,t,n){if(e!==Object(e))return void 0;var r,o={};for(r in e)e.hasOwnProperty(r)&&(o[r]=Object.getOwnPropertyDescriptor(e,r),"boolean"==typeof t&&(o[r].writable=t),"boolean"==typeof n&&(o[r].configurable=n));return o}function r(e){return n(e,!1,!1)}n.readonly=r,t.exports=n},{}],9:[function(e,t){t.exports=e("./bootstrap").annotations},{"./bootstrap":13}],10:[function(e,t){t.exports=window.wp.customize},{}],11:[function(e,t){function n(e,t){return"headings"===e.id?-1:"headings"===t.id?1:0}function r(e){return e.reduce(function(e,t){return"site-title"!==t.id&&e.push(t),e},[])}var o=e("../helpers/bootstrap"),i=[];o&&o.types&&(i=o.types.sort(n),i=r(i)),t.exports=i},{"../helpers/bootstrap":13}],12:[function(e,t){t.exports=Backbone},{}],13:[function(e,t){var n=window._JetpackFonts;t.exports=n},{}],14:[function(e,t){var n=e("../helpers/backbone"),r=e("../helpers/underscore");t.exports=r.extend(n.Events)},{"../helpers/backbone":12,"../helpers/underscore":18}],15:[function(e,t){function n(e){var t=u(e.provider);return t?void t.addFontToPreview(e):void a("live update failed because no provider could be found for",e)}function r(e){if(e.length)return e;a("warning: selectedFonts is not an array. trying to convert",e);var t=Object.keys(e);return t&&t.length?t.reduce(function(t,n){return e[n]&&e[n].provider&&t.push(e[n]),t},[]):[]}function o(e){e=r(e),a("rendering live update for new styles",e),e&&e.forEach(n),c.writeFontStyles(e)}function i(){a("binding live updates for custom-fonts"),s("jetpack_fonts[selected_fonts]",function(e){e.bind(function(e){o(e)})}),o(s("jetpack_fonts[selected_fonts]").get())}var s=e("../helpers/api"),a=e("debug")("jetpack-fonts:live-update"),c=e("../helpers/preview-styles"),u=e("../helpers/provider-views").getViewForProvider;e("../providers/google"),t.exports={liveUpdateFontsInPreview:o},s.bind("preview-ready",i)},{"../helpers/api":10,"../helpers/preview-styles":16,"../helpers/provider-views":17,"../providers/google":20,debug:1}],16:[function(e,t){function n(e){return F?(y("generating css for style type",e.type,"using these annotations:",F[e.type]),!F[e.type]||F[e.type].length<1?(y("no annotations found for style type",e.type,"; existing annotations:",F),""):F[e.type].map(r.bind(null,e)).join(" ")):(y("no annotations found at all; cannot generate css"),"")}function r(e,t){if(!t.selector)return"";y("generateCssForAnnotation for style",e.cssName,"and annotation",t);var n="";if(e.cssName&&p(t)){var r=l(e);r&&r.length>0&&(n+="font-family:"+r+";")}var a=o(e.type);if(a&&(n+="font-weight:"+c(e.currentFvd,t)+";",n+="font-style:"+s(e.currentFvd,t)+";"),e.size){var u=d(e.size,t);u&&u.length>0&&(n+="font-size:"+u+";")}return n.length?(n=i(t.selector)+" {"+n+"}",y("generated css for",e,"is",n),n):n}function o(e){return w.length<1?(y("cannot tell if ",e," is adjustable: no availableTypes"),!1):w.reduce(function(t,n){return n.id===e&&n.fvdAdjust===!0?!0:t},!1)}function i(e){return e.split(/,\s*/).reduce(function(e,t){return e.push(".wf-active "+t),e},[]).join(", ")}function s(e,t){if(e){var n=b.parse(e);if(n&&n["font-style"])return n["font-style"]}var r=a(t);return r?r:"normal"}function a(e){var t;return f(e).forEach(function(e){e.value&&"font-style"===e.property&&(t=e.value)}),t}function c(e,t){if(e){var n=b.parse(e);if(n&&n["font-weight"])return n["font-weight"]}var r=u(t);return r?r:"400"}function u(e){var t;return f(e).forEach(function(e){e.value&&"font-weight"===e.property&&(t=e.value)}),t}function l(e){return e.fontFamilies||e.cssName}function f(e){return e.rules&&e.rules.length?e.rules:(y("no annotation rules found for",e),[])}function p(e){var t=!1;return f(e).forEach(function(e){e.value&&"font-family"===e.property&&"inherit"!==e.value&&(t=!0)}),t}function d(e,t){var n=h(t);if(n){var r=v(n),o=g(n);if(!r||!o)return void y("unable to parse size annotation",n);var i=.06*parseInt(e,10)+1;return(i*o).toFixed(1)+r}}function h(e){var t;return f(e).forEach(function(e){e.value&&"font-size"===e.property&&!/^inherit/.test(e.value)&&(t=e.value)}),t}function v(e){var t=e.match(/[\d\.]+([A-Za-z]{2,3}|%)/);if(t&&t[1])return t[1]}function g(e){var t=e.match(/((\d*\.(\d+))|(\d+))([A-Za-z]{2,3}|%)/);if(t){var n,r;return t[4]?(n=parseInt(t[4],10),r=n>9?1:3):(n=parseFloat(t[2]),r=t[3].length+1),n.toFixed(r)}}var m=e("../helpers/backbone").$,y=e("debug")("jetpack-fonts:preview-css"),b=e("fvd"),w=e("../helpers/available-types"),F=e("../helpers/annotations"),x={getFontStyleElement:function(){return m("#jetpack-custom-fonts-css")[0]},writeFontStyles:function(e){x.removeFontStyleElement(),F=x.maybeMergeAnnotationsForStyles(F,e);var t=x.generateCssFromStyles(e);y("css generation complete:",t),x.addStyleElementToPage(x.createStyleElementWith(t))},maybeMergeAnnotationsForStyles:function(e,t){var n;if(e)return e["site-title"]&&e.headings?(n=t.length&&t.some(function(e){return"site-title"===e.type}))?e:(y("merging site-title annotations into headings"),e.headings=e.headings.concat(e["site-title"]),delete e["site-title"],e):e},generateCssFromStyles:function(e){return e?(y("generating css for styles",e),e.reduce(function(e,t){var r=n(t);return r&&(e+=" "+r),e},".wf-active > body { font-weight: 400; }")):(y("generating empty css because there are no styles"),"")},createStyleElementWith:function(e){return m('<style id="jetpack-custom-fonts-css">'+e+"</style>")},removeFontStyleElement:function(){var e=x.getFontStyleElement();e&&m(e).remove()},addStyleElementToPage:function(e){m("head").prepend(e)}};t.exports=x},{"../helpers/annotations":9,"../helpers/available-types":11,"../helpers/backbone":12,debug:1,fvd:5}],17:[function(e,t){function n(){i("importing provider views from",o.JetpackFonts.providerViews),o.JetpackFonts.providerViews&&Object.keys(o.JetpackFonts.providerViews).forEach(function(e){a[e]=o.JetpackFonts.providerViews[e]})}function r(e){return n(),a[e]?(i("found view for provider",e),a[e]):(i("no view found for provider",e),null)}var o=e("../helpers/api"),i=e("debug")("jetpack-fonts:provider-views"),s=e("../views/dropdown-item");o.JetpackFonts||(o.JetpackFonts={}),o.JetpackFonts.providerViews||(o.JetpackFonts.providerViews={}),o.JetpackFonts.ProviderView=s.extend({mouseenter:function(){},mouseleave:function(){}});var a={};t.exports={getViewForProvider:r}},{"../helpers/api":10,"../views/dropdown-item":21,debug:1}],18:[function(e,t){t.exports=_},{}],19:[function(e,t){t.exports=WebFont},{}],20:[function(e,t){function n(e,t){~a.indexOf(e.id)||(a.push(e.id),s.load({google:{families:[e.id],text:t},classes:!1,events:!1}))}function r(e){if(!~a.indexOf(e.id)){a.push(e.id);var t=e.id+":100,200,300,400,500,600,700,800,900,100italic,200italic,300italic,400italic,500italic,600italic,700italic,800italic,900italic";if(i.providerData&&i.providerData.googleSubsetString){var n=i.providerData.googleSubsetString;n&&n.length>0&&(t+=":"+n)}s.load({google:{families:[t]}})}}var o=e("../helpers/api"),i=e("../helpers/bootstrap"),s=e("../helpers/webfont"),a=[],c=o.JetpackFonts.ProviderView.extend({render:function(){return this.$el.html(this.model.get("displayName")),this.$el.css("font-family",'"'+this.model.get("cssName")+'"'),this.currentFont&&this.currentFont.get("id")===this.model.get("id")?this.$el.addClass("active"):this.$el.removeClass("active"),n(this.model.toJSON(),this.model.get("id")),this}});c.addFontToPreview=r,o.JetpackFonts.providerViews.google=c,t.exports=c},{"../helpers/api":10,"../helpers/bootstrap":13,"../helpers/webfont":19}],21:[function(e,t){var n=e("../helpers/backbone"),r=e("../helpers/emitter"),o=n.View.extend({className:"jetpack-fonts__option",events:{click:"fontChanged"},initialize:function(e){this.type=e.type,this.currentFont=e.currentFont,this.currentFont&&this.listenTo(this.currentFont,"change",this.render)},render:function(){return this.$el.html(this.model.get("displayName")),this},fontChanged:function(){this.currentFont&&this.currentFont!==this.model&&r.trigger("change-font",{font:this.model,type:this.type.id})}});o.addFontToControls=function(){},t.exports=o},{"../helpers/backbone":12,"../helpers/emitter":14}]},{},[15]);